(this.webpackJsonptetris=this.webpackJsonptetris||[]).push([[0],{19:function(n,t,e){},25:function(n,t,e){"use strict";e.r(t);var r,o,c,i,a,u,s,l,f=e(0),b=e(11),d=e.n(b),j=(e(19),e(2)),O=e(5),p=e(3),v=e(4),x=v.a.div(r||(r=Object(p.a)(["\n  width: auto;\n  background: rgba(",", 0.8);\n  border: 4px solid;\n  border-top-color: ",";\n  border-left-color: ",";\n  border-right-color: ",";\n  border-bottom-color: ",";\n"])),(function(n){return n.color}),(function(n){var t=n.color;return"rgba(".concat(t,", 0.8)")}),(function(n){var t=n.color;return"rgba(".concat(t,", 0.8)")}),(function(n){var t=n.color;return"rgba(".concat(t,", 0.2)")}),(function(n){var t=n.color;return"rgba(".concat(t,", 0.2)")})),h=(o={},Object(j.a)(o,0,{shape:[[0]],color:"0, 0, 0"}),Object(j.a)(o,"I",{shape:[[0,"I",0,0],[0,"I",0,0],[0,"I",0,0],[0,"I",0,0]],color:"0, 255, 255"}),Object(j.a)(o,"J",{shape:[[0,"J",0],[0,"J",0],["J","J",0]],color:"0,0,255"}),Object(j.a)(o,"L",{shape:[[0,"L",0],[0,"L",0],[0,"L","L"]],color:"255, 170, 0"}),Object(j.a)(o,"O",{shape:[["O","O"],["O","O"]],color:"255,255,0"}),Object(j.a)(o,"S",{shape:[[0,"S","S"],["S","S",0],[0,0,0]],color:"0,255,0"}),Object(j.a)(o,"T",{shape:[["T","T","T"],[0,"T",0],[0,0,0]],color:"170,0,255"}),Object(j.a)(o,"Z",{shape:[["Z","Z",0],[0,"Z","Z"],[0,0,0]],color:"255,0,0"}),o),g=function(n){return Object.keys(function(n){return Object.fromEntries(Object.entries(n).slice(1))}(n))},m=function(){var n=g(h),t=n[Math.floor(Math.random()*n.length)];return console.log({DUPA:h[t]}),h[t]},y=e(1),w=function(n){var t=n.type,e=(h[t]||{}).color;return Object(y.jsx)(x,{color:e,type:t})},R=v.a.div(c||(c=Object(p.a)(["\n  display: grid;\n  grid-template-rows: repeat(\n    ",",\n    calc(25vw / ",")\n  );\n  grid-template-columns: repeat(",", 1fr);\n  grid-gap: 1px;\n  border 2px solid #333;\n  width: 100%;\n  max-width: 25vw;\n  background: #111;\n  position: relative;\n"])),(function(n){return n.height}),(function(n){return n.width}),(function(n){return n.width})),T=v.a.div(i||(i=Object(p.a)(["\n  background: rgba(0, 0, 0, 0.7);\n  color: red;\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  z-index: 9;\n\n  .text {\n    top: 50%;\n    left: 50%;\n    font-size: 1.2em;\n    position: absolute;\n    font-weight: 600;\n    transform: translate(-50%, -50%);\n    text-align: center;\n  }\n"]))),E=function(n){var t=n.score;return Object(y.jsx)(T,{children:Object(y.jsxs)("div",{className:"text",children:[Object(y.jsx)("div",{children:"GAME OVER"}),Object(y.jsxs)("div",{children:["score: ",t]})]})})},L="clear",A={WIDTH:12,HEIGHT:20,EMPTY_CELL:[0,L]},I=h[0].shape,k=function(n){var t,e=n.stage,r=void 0===e?[]:e,o=n.gameOver,c=n.score;return Object(y.jsxs)(R,{width:null===(t=r[0])||void 0===t?void 0:t.length,height:null===r||void 0===r?void 0:r.length,children:[o&&Object(y.jsx)(E,{score:c}),r.map((function(n,t){return n.map((function(n,e){var r="cell-".concat(t,"-").concat(e),o=n[0];return Object(y.jsx)(w,{type:o},r)}))}))]})},S=v.a.div(a||(a=Object(p.a)(["\n  width: 100vw;\n  height: 100vh;\n  background: #ccc;\n"]))),W=v.a.div(u||(u=Object(p.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: baseline;\n  display: flex;\n  align-items: flex-start;\n  padding: 40px;\n  margin: 0 auto;\n  max-width: 900px;\n\n  aside {\n    width: 100%;\n    max-width: 180px;\n    display: block;\n    padding: 0 20px;\n  }\n"]))),_=e(6),C=function(n,t){return n.fill(t)},G=Array(20),H=Array(12),D=function(){return Array.from(G,(function(){return C(H,A.EMPTY_CELL)}))},F=function(n,t,e){var r=e.x,o=e.y,c=!1;return n.tetromino.map((function(e,i){return e.map((function(e,a){if(!(0===e)){var u=i+n.position.y,s=a+n.position.x,l=u+o,f=s+r;(!t[l]||!t[u][f]||t[l][f][1]!==L)&&(c=!0)}}))})),c};!function(n){n[n.LEFT=-1]="LEFT",n[n.RIGHT=1]="RIGHT"}(s||(s={})),function(n){n.ARROW_LEFT="ArrowLeft",n.ARROW_RIGHT="ArrowRight",n.ARROW_DOWN="ArrowDown",n.ARROW_UP="ArrowUp"}(l||(l={}));var J,N,P,M=[40,100,300,1200],z=function(){return{position:{x:(n=A.WIDTH,n/2-2),y:0},tetromino:m().shape,collided:!1};var n},U=function(){var n=Object(f.useState)(Object(_.a)(Object(_.a)({},z()),{},{tetromino:I})),t=Object(O.a)(n,2),e=t[0],r=t[1],o=Object(f.useCallback)((function(){r(z())}),[]);return[e,function(n,t){var e=n.x,o=n.y;r((function(n){return Object(_.a)(Object(_.a)({},n),{},{position:{x:n.position.x+=e,y:n.position.y+=o},collided:t})}))},o,function(n,t){var o=JSON.parse(JSON.stringify(e));o.tetromino=function(n,t){var e=function(n){return n.map((function(t,e){return n.map((function(n){return n[e]}))}))}(n);return t===s.RIGHT?e.map((function(n){return n.reverse()})):e.reverse()}(o.tetromino,t);for(var c=e.position.x,i=1;F(o,n,{x:0,y:0});)if(o.position.x+=i,(i=-(i+(i>0?1:-1)))>o.tetromino[0].length)return void(o.position.x=c);r(o)}]},Z=function(n,t){return n.reduce((function(e,r){var o=function(n){return-1===n.findIndex((function(n){return 0===n[0]}))}(r);return o?(t((function(n){return n+1})),function(n,t){n.unshift(C(new Array(t[0].length),A.EMPTY_CELL))}(e,n),e):(e.push(r),e)}),[])},Y=function(n,t,e,r){var o=function(n){return null===n||void 0===n?void 0:n.map((function(n){return n.map((function(n){return n[1]===L?A.EMPTY_CELL:n}))}))}(t);return function(n,t){n.tetromino.map((function(e,r){return e.map((function(e,o){if(0!==e){var c=r+n.position.y,i=o+n.position.x,a=n.collided?"merged":L;t[c][i]=[e,a]}}))}))}(n,o),n.collided?(e(),Z(o,r)):o},B=function(n,t){var e=Object(f.useState)(D()),r=Object(O.a)(e,2),o=r[0],c=r[1],i=Object(f.useState)(0),a=Object(O.a)(i,2),u=a[0],s=a[1];return Object(f.useEffect)((function(){s(0),c((function(e){return Y(n,e,t,s)}))}),[n,t]),[o,c,u]},K=function(n,t){var e=Object(f.useRef)(null);Object(f.useEffect)((function(){e.current=n}),[n]),Object(f.useEffect)((function(){if(null!==t){var n=setInterval((function(){e.current&&e.current()}),t);return function(){clearInterval(n)}}}),[t])},V=function(n){var t=Object(f.useState)(0),e=Object(O.a)(t,2),r=e[0],o=e[1],c=Object(f.useState)(0),i=Object(O.a)(c,2),a=i[0],u=i[1],s=Object(f.useState)(1),l=Object(O.a)(s,2),b=l[0],d=l[1],j=Object(f.useCallback)((function(){n>0&&(o((function(t){return function(n,t,e){return n+M[t-1]*e}(t,n,b)})),u((function(t){return t+n})))}),[b,n]);return Object(f.useEffect)((function(){j()}),[j,n,r]),[r,o,a,u,b,d]},q=v.a.div(J||(J=Object(p.a)(["\n  display: flex;\n  align-items: center;\n  margin-bottom: 20px;\n  padding: 10px 20px;\n  width: 100%;\n  background: #1c1c1c;\n  color: #ececec;\n  box-sizing: border-box;\n\n  .text {\n    padding-right: 4px;\n    width: 60px;\n  }\n\n  .value {\n    font-size: 1.4em;\n  }\n"]))),Q=function(n){var t=n.text,e=n.value;return Object(y.jsxs)(q,{children:[Object(y.jsxs)("div",{className:"text",children:[t,":"]}),Object(y.jsx)("div",{className:"value",children:e})]})},X=v.a.aside(N||(N=Object(p.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  max-width: 120px;\n"]))),$=v.a.button(P||(P=Object(p.a)(["\n  width: 100%;\n  padding: 10px 0;\n  letter-spacing: 0.2em;\n  font-size: 1.2em;\n  font-weight: 500;\n  color: #1c1c1c;\n  border: solid 1px #1c1c1c;\n  transition-property: border-color, background-color, color;\n  transition-duration: 0.25s;\n  transition-timing-function: ease-in-out;\n\n  &:hover {\n    cursor: pointer;\n    color: #ececec;\n    background: #808080;\n    border-color: #808080;\n  }\n"]))),nn=function(n){var t=n.onClick,e=n.children;return Object(y.jsx)($,{onClick:t,children:e})},tn=function(n){var t=n.score,e=n.rows,r=n.level,o=n.startGame;return Object(y.jsxs)(X,{children:[Object(y.jsx)(Q,{text:"Score",value:t}),Object(y.jsx)(Q,{text:"Rows",value:e}),Object(y.jsx)(Q,{text:"Level",value:r}),Object(y.jsx)(nn,{onClick:o,children:"START"})]})},en=function(n){return 1e3/n+200},rn=function(){var n=Object(f.useState)(null),t=Object(O.a)(n,2),e=t[0],r=t[1],o=Object(f.useState)(!1),c=Object(O.a)(o,2),i=c[0],a=c[1],u=U(),b=Object(O.a)(u,4),d=b[0],p=b[1],v=b[2],x=b[3],h=B(d,v),g=Object(O.a)(h,3),m=g[0],w=g[1],R=g[2],T=V(R),E=Object(O.a)(T,6),L=E[0],A=E[1],I=E[2],_=E[3],C=E[4],G=E[5];K((function(){J()}),e);var H=function(n){var t={x:n,y:0};F(d,m,t)||p(t,!1)},J=function(){I>5*C&&(G((function(n){return n+1})),r(en(C)));var n={x:0,y:1};if(F(d,m,n)){d.position.y<1&&(a(!0),r(null));p({x:0,y:0},!0)}else p(n,!1)},N=function(n){var t;return t={},Object(j.a)(t,l.ARROW_LEFT,(function(){return H(s.LEFT)})),Object(j.a)(t,l.ARROW_RIGHT,(function(){return H(s.RIGHT)})),Object(j.a)(t,l.ARROW_DOWN,(function(){return r(null),void J()})),Object(j.a)(t,l.ARROW_UP,(function(){return x(n,s.RIGHT)})),t};return Object(y.jsx)(S,{role:"button",tabIndex:0,onKeyDown:function(n){if(!i){var t=n.key,e=N(m)[t];"function"===typeof e&&e()}},onKeyUp:function(n){var t=n.key;i||t!==l.ARROW_DOWN||r(1e3)},children:Object(y.jsxs)(W,{children:[Object(y.jsx)(k,{stage:m,gameOver:i,score:L}),Object(y.jsx)(tn,{score:L,level:C,rows:I,startGame:function(){w(D()),r(en(C)),v(),a(!1),A(0),_(0),G(1)}})]})})},on=function(){return Object(y.jsx)("div",{className:"App",children:Object(y.jsx)(rn,{})})},cn=function(n){n&&n instanceof Function&&e.e(3).then(e.bind(null,26)).then((function(t){var e=t.getCLS,r=t.getFID,o=t.getFCP,c=t.getLCP,i=t.getTTFB;e(n),r(n),o(n),c(n),i(n)}))};d.a.render(Object(y.jsx)(on,{}),document.getElementById("root")),cn()}},[[25,1,2]]]);
//# sourceMappingURL=main.26c6baee.chunk.js.map